"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[72],{5009:(e,l,s)=>{s.d(l,{A:()=>n});s(5043);var d=s(1072),a=s(8602),o=s(9397),t=s(579);const n=e=>(0,t.jsx)(d.A,{children:(0,t.jsx)(a.A,{children:(0,t.jsxs)("div",{className:"page-title-box",children:[(0,t.jsx)("div",{className:"page-title-right",children:(0,t.jsxs)(o.A,{listProps:{className:"m-0"},children:[(0,t.jsx)(o.A.Item,{href:"/",children:"Dashboard"}),e.breadCrumbItems.map(((e,l)=>e.active?(0,t.jsx)(o.A.Item,{active:!0,style:{color:"#000"},children:e.label},l):(0,t.jsx)(o.A.Item,{href:e.path,children:e.label},l)))]})}),(0,t.jsx)("h4",{className:"page-title",style:{color:"#000"},children:e.title})]})})})},5691:(e,l,s)=>{s.r(l),s.d(l,{default:()=>f});var d=s(5043),a=s(5009),o=s(6522),t=s(1072),n=s(8602),i=s(4282),c=s(8258),r=s(6585),u=s(423),h=s(3825),v=s(7196),m=s(6414),x=s(4556),p=s(3203),j=s(4858),b=s(3216),g=s(5475),N=s(5948),A=s(579);const f=()=>{var e,l,s,f,y,k,S,w,C,I;const P=(0,x.wA)(),L=(0,b.Zp)(),{handleSubmit:D,register:E,setValue:_}=(0,j.mN)(),[O,R]=(0,d.useState)(!1),q=(0,x.d4)((e=>e)),[G,M]=(0,d.useState)((new Date).toISOString().split("T")[0]),[W]=(0,g.ok)(),T=W.get("Id"),B=Boolean(T),F=null===q||void 0===q||null===(e=q.stockListReducer)||void 0===e||null===(l=e.stockList)||void 0===l?void 0:l.response;console.log(F,"1232232");const H=null===q||void 0===q||null===(s=q.getWarehouseListReducer)||void 0===s||null===(f=s.searchWarehouse)||void 0===f?void 0:f.response,V=null===H||void 0===H?void 0:H.map((e=>({value:e._id,label:e.name}))),[z,Q]=(0,d.useState)([]),[J,K]=(0,d.useState)(null);console.log(z,"openingProducts");const[U,Y]=(0,d.useState)(null),[Z,$]=(0,d.useState)(!1),[X,ee]=(0,d.useState)((null===J||void 0===J?void 0:J.quantity)||""),le=(0,d.useRef)(null),se=null===q||void 0===q||null===(y=q.createStockReducer)||void 0===y||null===(k=y.createStock)||void 0===k?void 0:k.status;(0,d.useEffect)((()=>{200===se&&L("/shivay/openingStock")}),[se]);(0,d.useEffect)((()=>{P((0,p.lo)())}),[P]),(0,d.useEffect)((()=>{P((0,p.y$)({limit:"",page:"",search:""}))}),[P]),(0,d.useEffect)((()=>{if(T&&(null===F||void 0===F?void 0:F.length)>0){const e=null===F||void 0===F?void 0:F.find((e=>e._id===T));K(e)}}),[T,F]),console.log(F,"StockInData");(0,d.useEffect)((()=>{if(J){ee((null===J||void 0===J?void 0:J.quantity)||"");const e=null!==J&&void 0!==J&&J.warehouseData?[{value:J.warehouseData._id,label:J.warehouseData.name}]:[];Y(e),M(null!==J&&void 0!==J&&J.date?new Date(null===J||void 0===J?void 0:J.date).toISOString().split("T")[0]:""),console.log(null===J||void 0===J?void 0:J.date,"selectedStock?.date"),_("description",null===J||void 0===J?void 0:J.description)}}),[J]),console.log(J,"selectedStock");const de=()=>{$(!0)},ae=e=>{ee(e.target.value)},oe=()=>{$(!1)},te=e=>{"Enter"===e.key&&oe()};return(0,d.useEffect)((()=>{const e=e=>{le.current&&!le.current.contains(e.target)&&oe()};if(Z)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[Z]),(0,A.jsxs)("div",{children:[(0,A.jsx)(a.A,{breadCrumbItems:[{label:"SHIVAY Opening Stock List",path:"/shivay/openingStock"},{label:B?"Edit Opening Stock":"Add Opening Stock",path:"/shivay/openingStock",active:!0}],title:B?"Edit Opening Stock":"Add Opening Stock"}),(0,A.jsxs)(o.A,{onSubmit:D((e=>{const l=z.map((e=>{let{product:l,...s}=e;return s})),s={warehouseId:null===U||void 0===U?void 0:U.value,...!T&&{productStock:l},description:null===e||void 0===e?void 0:e.description,date:null===e||void 0===e?void 0:e.date};P(T?(0,p.V_)({...s,_id:T,quantity:X}):(0,p.Ok)(s))})),children:[(0,A.jsxs)(t.A,{children:[(0,A.jsx)(n.A,{sm:3,children:(0,A.jsxs)(o.A.Group,{className:"mb-1",children:[(0,A.jsxs)(o.A.Label,{className:"mb-0",children:["Warehouse ",(0,A.jsx)("span",{className:"text-danger",children:"*"})]}),(0,A.jsx)(r.Ay,{value:U,onChange:e=>{Y(e)},options:V,placeholder:"Select a warehouse",noOptionsMessage:()=>"No warehouse found...",required:!0})]})}),(0,A.jsx)(n.A,{sm:3,children:(0,A.jsxs)(o.A.Group,{className:"mb-1",children:[(0,A.jsxs)(o.A.Label,{className:"mb-0",children:["Date Range ",(0,A.jsx)("span",{className:"text-danger",children:"*"})]}),(0,A.jsx)(o.A.Control,{type:"date",value:G,...E("date",{required:!0}),onChange:e=>M(e.target.value),required:!0})]})}),(0,A.jsx)(n.A,{sm:3,children:(0,A.jsxs)(o.A.Group,{className:"mb-1",children:[(0,A.jsx)(o.A.Label,{className:"mb-0",children:"Description"}),(0,A.jsx)(o.A.Control,{as:"textarea",rows:1,...E("description"),placeholder:"Enter Description"})]})}),(0,A.jsx)(n.A,{sm:3,className:"text-end mt-1",children:!B&&(0,A.jsxs)(i.A,{className:"mt-2 fw-bold custom-button",onClick:()=>R(!0),children:[(0,A.jsx)(u.Hpy,{className:"fs-3"}),"\xa0Product"]})})]}),(0,A.jsxs)("div",{className:"mt-2",children:[(0,A.jsx)(c.A,{style:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:(0,A.jsx)(c.A.Body,{className:"text-center py-1",children:(0,A.jsxs)("table",{className:"table table-striped bg-white",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{className:"table_header",children:[(0,A.jsx)("th",{scope:"col",children:(0,A.jsx)("i",{className:"mdi mdi-merge"})}),(0,A.jsx)("th",{scope:"col",children:"Product Name"}),(0,A.jsx)("th",{scope:"col",children:"Code"}),(0,A.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,A.jsx)("tbody",{children:T?(0,A.jsx)(A.Fragment,{children:(null===(S=[J])||void 0===S?void 0:S.length)>0?null===(w=[J])||void 0===w?void 0:w.map(((e,l)=>{var s,d;return(0,A.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,A.jsx)("th",{scope:"row",children:l+1}),(0,A.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(s=e.productData)||void 0===s?void 0:s.name)||(0,A.jsx)("span",{className:"text-black",children:"-"})}),(0,A.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(d=e.productData)||void 0===d?void 0:d.code)||(0,A.jsx)("span",{className:"text-black",children:"-"})}),(0,A.jsx)("td",{className:"fw-bold px-0 pb-0",children:Z?(0,A.jsx)("input",{ref:le,type:"number",value:X,onChange:ae,onKeyPress:te,className:"form-control form-control-md",style:{width:"5vw",display:"inline-block",marginTop:"-10px"}}):(0,A.jsx)("span",{onClick:de,children:X})||(0,A.jsx)("span",{className:"text-black",children:"-"})}),(0,A.jsx)("div",{className:"icon-container d-flex pb-0",children:(0,A.jsx)("span",{className:"icon-wrapper me-4",title:"Edit",onClick:de,children:(0,A.jsx)(h.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})})})]},l)})):(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add opening stock."})})}):(0,A.jsx)(A.Fragment,{children:z&&z.length>0?null===z||void 0===z?void 0:z.map(((e,l)=>{var s,d;return(0,A.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,A.jsx)("th",{scope:"row",children:l+1}),(0,A.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.name)||(0,A.jsx)("span",{className:"text-black",children:"-"})}),(0,A.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(d=e.product)||void 0===d?void 0:d.code)||(0,A.jsx)("span",{className:"text-black",children:"-"})}),(0,A.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||(0,A.jsx)("span",{className:"text-black",children:"-"})}),(0,A.jsx)("div",{className:"icon-container d-flex pb-0",children:(0,A.jsx)("span",{className:"icon-wrapper me-4",title:"Delete",onClick:()=>(e=>{const l=z.filter(((l,s)=>s!==e));Q(l)})(l),children:(0,A.jsx)(v.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})})]},l)})):(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:"6",className:"text-center text-danger py-3",children:"Note : No products added yet. Please add products to add opening stock."})})})})]})})}),(0,A.jsxs)("div",{className:"text-end",children:[(0,A.jsx)(i.A,{className:"fw-bold cancel-button me-2",onClick:()=>L("/shivay/openingStock"),children:"Cancel"}),(0,A.jsx)(i.A,{type:"submit",className:"custom-button fw-bold",disabled:null===q||void 0===q||null===(C=q.createStockReducer)||void 0===C?void 0:C.loading,style:{width:"100px"},children:null!==q&&void 0!==q&&null!==(I=q.createStockReducer)&&void 0!==I&&I.loading?(0,A.jsx)(N.N7,{color:"white"}):B?"Update":"Submit"})]})]})]}),(0,A.jsx)(m.A,{openingProducts:z,setOpeningProducts:Q,showModal:O,handleClose:()=>R(!1)})]})}},5948:(e,l,s)=>{s.d(l,{N7:()=>n,Pf:()=>t,Rh:()=>o});s(5043);var d=s(2942),a=s(579);const o=()=>(0,a.jsx)("div",{style:{height:"54vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(d.LW,{color:"#6655D9",strokeWidth:"5",animationDuration:"0.75",width:"70",visible:!0})}),t=()=>(0,a.jsx)("div",{style:{height:"30vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(d.LW,{color:"#6655D9",strokeWidth:"5",animationDuration:"0.75",width:"70",visible:!0})}),n=()=>(0,a.jsx)("div",{className:" d-flex justify-content-center align-items-center w-100",style:{height:"2.2vh"},children:(0,a.jsx)(d.ul,{visible:!0,height:"25",width:"25",ariaLabel:"blocks-loading",wrapperStyle:{},wrapperClass:"blocks-wrapper",colors:["#fff","#fff","#fff","#fff","#fff"]})})},6414:(e,l,s)=>{s.d(l,{A:()=>p});var d=s(5043),a=s(3083),o=s(6522),t=s(1072),n=s(8602),i=s(4282),c=s(6585),r=s(3203),u=s(4556),h=s(4858),v=s(6518),m=s(3216),x=s(579);const p=e=>{var l,s,p,j,b;let{showModal:g,handleClose:N,openingProducts:A,setOpeningProducts:f,selectedWarehouse:y}=e;const k=(0,u.wA)(),{handleSubmit:S,register:w,reset:C}=(0,h.mN)(),I=(0,u.d4)((e=>e)),P=null===I||void 0===I||null===(l=I.searchProductReducer)||void 0===l||null===(s=l.searchProduct)||void 0===s?void 0:s.response,L=null===I||void 0===I||null===(p=I.createStockCheckReducer)||void 0===p?void 0:p.createStockCheck;console.log(L,"StockCheck");const[D,E]=(0,d.useState)(""),[_,O]=(0,d.useState)(""),[R,q]=(0,d.useState)(),G=(0,m.zy)();console.log(P,"ProductSearch");const[M,W]=(0,d.useState)("modelName");(0,d.useEffect)((()=>{var e;"/shivay/addDispatch"===G.pathname&&R&&k((0,r.ed)({warehouseId:null===y||void 0===y?void 0:y.value,qty:R,productId:null===P||void 0===P||null===(e=P[0])||void 0===e?void 0:e._id}))}),[G,R]),(0,d.useEffect)((()=>{const e=setTimeout((()=>{D&&("modelName"===M?k((0,r.bm)({modelName:D})):"code"===M&&k((0,r.bm)({code:D})))}),500);return()=>clearTimeout(e)}),[D,k,M]);const T=(null===P||void 0===P?void 0:P.map((e=>{var l;return{value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e||null===(l=e.modelId)||void 0===l?void 0:l.name,data:e}})))||[],B=(null===P||void 0===P?void 0:P.map((e=>({value:null===e||void 0===e?void 0:e._id,label:null===e||void 0===e?void 0:e.code,data:e}))))||[],[F,H]=(0,d.useState)(null);console.log(F,"selectedModalselectedModal");const[V,z]=(0,d.useState)(null);console.log(V,"selectedCode");(0,d.useEffect)((()=>{k((0,r.bm)())}),[k]);return console.log(P,"ProductSearch"),console.log(L,"0987"),(0,x.jsx)("div",{children:(0,x.jsxs)(a.A,{show:g,centered:!0,size:"lg",onHide:N,backdrop:"static",keyboard:!1,children:[(0,x.jsx)(a.A.Header,{closeButton:!0,children:(0,x.jsx)(a.A.Title,{className:"text-black",children:"Add Product"})}),(0,x.jsxs)(o.A,{onSubmit:S((e=>{if(null!==A&&void 0!==A&&A.some((e=>(null===e||void 0===e?void 0:e.productId)===(null===F||void 0===F?void 0:F.value))))(0,v.A)("Product Already Exist","danger");else{const e={productId:null===F||void 0===F?void 0:F.value,quantity:R,product:null===F||void 0===F?void 0:F.data};console.log(e,"productsData"),f((l=>[...l,e])),N(),C(),z(""),H(""),q("")}})),children:[(0,x.jsxs)(a.A.Body,{children:[(0,x.jsxs)(t.A,{children:[(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Search By"}),(0,x.jsxs)(o.A.Select,{value:M,onChange:e=>{W(e.target.value),E(""),H(null),z(null),O("")},children:[(0,x.jsx)("option",{value:"modelName",children:"Model"}),(0,x.jsx)("option",{value:"code",children:"Code"})]})]})}),"modelName"===M?(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Model Name"}),(0,x.jsx)(c.Ay,{value:F,onChange:e=>{var l,s,d;H(e),z({value:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l._id,label:null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.code,data:null===e||void 0===e?void 0:e.data}),O(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.name)},onInputChange:e=>E(e),options:T,placeholder:"Search Modal",isClearable:!0,isSearchable:!0,isLoading:null===I||void 0===I||null===(j=I.searchProductReducer)||void 0===j?void 0:j.loading})]})}):(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Code"}),(0,x.jsx)(c.Ay,{value:V,onChange:e=>{var l,s,d,a;z(e),H({value:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l._id,label:null===e||void 0===e||null===(s=e.data)||void 0===s||null===(d=s.modelId)||void 0===d?void 0:d.name,data:null===e||void 0===e?void 0:e.data}),O(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.name)},onInputChange:e=>E(e),options:B,placeholder:"Search Code",isClearable:!0,isSearchable:!0,isLoading:null===I||void 0===I||null===(b=I.searchProductReducer)||void 0===b?void 0:b.loading})]})}),"modelName"===M?(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Code"}),(0,x.jsx)(o.A.Control,{type:"text",placeholder:"Code",value:null===V||void 0===V?void 0:V.label})]})}):(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Model Name"}),(0,x.jsx)(o.A.Control,{type:"text",placeholder:"Modal Name",value:null===F||void 0===F?void 0:F.label})]})}),(F||V)&&(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Product Name"}),(0,x.jsx)(o.A.Control,{type:"text",value:_,placeholder:"Enter Product Name",onChange:e=>O(e.target.value),required:!0})]})}),(0,x.jsx)(n.A,{sm:6,children:(0,x.jsxs)(o.A.Group,{className:"mb-3",children:[(0,x.jsx)(o.A.Label,{className:"mb-0",children:"Quantity"}),(0,x.jsx)(o.A.Control,{type:"number",placeholder:"Enter Number",value:R,onChange:e=>{const l=parseInt(e.target.value);q(l>0?l:"")},required:!0,min:1})]})})]}),400==(null===L||void 0===L?void 0:L.status)&&"/shivay/addDispatch"===G.pathname&&(0,x.jsx)(t.A,{className:"px-2",children:(0,x.jsx)("div",{className:"py-1 text-center border border-primary rounded bg-light text-primary",children:(null===L||void 0===L?void 0:L.error)||JSON.stringify(L)})})]}),(0,x.jsxs)(a.A.Footer,{children:[(0,x.jsx)(i.A,{className:"cancel-button",onClick:N,children:"Close"}),(0,x.jsx)(i.A,{type:"submit",className:"custom-button",children:"Save"})]})]})]})})}}}]);
//# sourceMappingURL=72.981512cd.chunk.js.map