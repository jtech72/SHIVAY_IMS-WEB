"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[72],{5691:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var l=t(5043),a=t(5009),n=t(6522),d=t(1072),o=t(8602),c=t(4282),i=t(8258),r=t(5449),u=t(423),p=t(3825),x=t(7196),h=t(6414),m=t(4556),v=t(9325),j=t(4858),b=t(3216),N=t(5475),g=t(579);const k=()=>{var e,s,t,k,f,w;const S=(0,m.wA)(),y=(0,b.Zp)(),{handleSubmit:A,register:C,setValue:D}=(0,j.mN)(),[E,I]=(0,l.useState)(!1),O=(0,m.d4)((e=>e)),[q,L]=(0,l.useState)((new Date).toISOString().split("T")[0]),[_]=(0,N.ok)(),P=_.get("Id"),F=Boolean(P),R=null===O||void 0===O?void 0:O.stockInListReducer;console.log(R,"StockInDataStockInDataStockInData");const W=null===O||void 0===O||null===(e=O.getWarehouseListReducer)||void 0===e||null===(s=e.searchWarehouse)||void 0===s?void 0:s.response,G=null===W||void 0===W?void 0:W.map((e=>({value:e._id,label:e.name}))),[T,V]=(0,l.useState)([]),[B,H]=(0,l.useState)(null);console.log(B,"selectedStock");const[K,M]=(0,l.useState)(null),[Q,U]=(0,l.useState)(!1),[Y,Z]=(0,l.useState)((null===B||void 0===B?void 0:B.quantity)||""),$=(0,l.useRef)(null),z=null===O||void 0===O||null===(t=O.createStockReducer)||void 0===t||null===(k=t.createStock)||void 0===k?void 0:k.status;(0,l.useEffect)((()=>{200===z&&y("/shivay/openingStock")}),[z]);(0,l.useEffect)((()=>{S((0,v.lo)())}),[S]),(0,l.useEffect)((()=>{S((0,v.y$)({limit:"",page:"",search:""}))}),[S]),(0,l.useEffect)((()=>{if(P&&(null===R||void 0===R?void 0:R.length)>0){const e=null===R||void 0===R?void 0:R.find((e=>e._id===P));H(e)}}),[P,R]),console.log(B,"selectedStock");(0,l.useEffect)((()=>{if(B){Z((null===B||void 0===B?void 0:B.quantity)||"");const e=null!==B&&void 0!==B&&B.warehouseData?[{value:B.warehouseData._id,label:B.warehouseData.name}]:[];M(e),L(null!==B&&void 0!==B&&B.date?new Date(null===B||void 0===B?void 0:B.date).toISOString().split("T")[0]:""),console.log(null===B||void 0===B?void 0:B.date,"selectedStock?.date"),D("description",null===B||void 0===B?void 0:B.description)}}),[B]),console.log(B,"selectedStock");const J=()=>{U(!0)},X=e=>{Z(e.target.value)},ee=()=>{U(!1)},se=e=>{"Enter"===e.key&&ee()};return(0,l.useEffect)((()=>{const e=e=>{$.current&&!$.current.contains(e.target)&&ee()};if(Q)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[Q]),(0,g.jsxs)("div",{children:[(0,g.jsx)(a.A,{breadCrumbItems:[{label:"SHIVAY Opening Stock List",path:"/shivay/openingStock"},{label:F?"Edit Opening Stock":"Add Opening Stock",path:"/shivay/openingStock",active:!0}],title:F?"Edit Opening Stock":"Add Opening Stock"}),(0,g.jsxs)(n.A,{onSubmit:A((e=>{const s=T.map((e=>{let{product:s,...t}=e;return t})),t={warehouseId:null===K||void 0===K?void 0:K.value,...!P&&{productStock:s},description:null===e||void 0===e?void 0:e.description,date:null===e||void 0===e?void 0:e.date};S(P?(0,v.V_)({...t,_id:P,quantity:Y}):(0,v.Ok)(t))})),children:[(0,g.jsxs)(d.A,{children:[(0,g.jsx)(o.A,{sm:3,children:(0,g.jsxs)(n.A.Group,{className:"mb-1",children:[(0,g.jsx)(n.A.Label,{className:"mb-0",children:"Warehouse"}),(0,g.jsx)(r.Ay,{value:K,onChange:e=>{M(e)},options:G,placeholder:"Select a warehouse",isClearable:!0,required:!0})]})}),(0,g.jsx)(o.A,{sm:3,children:(0,g.jsxs)(n.A.Group,{className:"mb-1",children:[(0,g.jsx)(n.A.Label,{className:"mb-0",children:"Date Range"}),(0,g.jsx)(n.A.Control,{type:"date",value:q,...C("date",{required:!0}),onChange:e=>L(e.target.value),required:!0})]})}),(0,g.jsx)(o.A,{sm:3,children:(0,g.jsxs)(n.A.Group,{className:"mb-1",children:[(0,g.jsx)(n.A.Label,{className:"mb-0",children:"Description"}),(0,g.jsx)(n.A.Control,{as:"textarea",rows:1,...C("description",{required:!0}),placeholder:"Enter Description"})]})}),(0,g.jsx)(o.A,{sm:3,className:"text-end mt-1",children:!F&&(0,g.jsxs)(c.A,{className:"mt-2 fw-bold custom-button",onClick:()=>I(!0),children:[(0,g.jsx)(u.Hpy,{className:"fs-3"}),"\xa0Product"]})})]}),(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsx)(i.A,{style:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:(0,g.jsx)(i.A.Body,{className:"text-center py-1",children:(0,g.jsxs)("table",{className:"table table-striped bg-white",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"table_header",children:[(0,g.jsx)("th",{scope:"col",children:(0,g.jsx)("i",{className:"mdi mdi-merge"})}),(0,g.jsx)("th",{scope:"col",children:"Product Name"}),(0,g.jsx)("th",{scope:"col",children:"Code"}),(0,g.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,g.jsx)("tbody",{children:P?(0,g.jsx)(g.Fragment,{children:(null===(f=[B])||void 0===f?void 0:f.length)>0?null===(w=[B])||void 0===w?void 0:w.map(((e,s)=>{var t,l;return(0,g.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,g.jsx)("th",{scope:"row",children:s+1}),(0,g.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(t=e.productData)||void 0===t?void 0:t.name)||(0,g.jsx)("span",{className:"text-black",children:"-"})}),(0,g.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(l=e.productData)||void 0===l?void 0:l.code)||(0,g.jsx)("span",{className:"text-black",children:"-"})}),(0,g.jsx)("td",{className:"fw-bold px-0 pb-0",children:Q?(0,g.jsx)("input",{ref:$,type:"number",value:Y,onChange:X,onKeyPress:se,className:"form-control form-control-md",style:{width:"5vw",display:"inline-block",marginTop:"-10px"}}):(0,g.jsx)("span",{onClick:J,children:Y})||(0,g.jsx)("span",{className:"text-black",children:"-"})}),(0,g.jsx)("div",{className:"icon-container d-flex pb-0",children:(0,g.jsx)("span",{className:"icon-wrapper me-4",title:"Edit",onClick:J,children:(0,g.jsx)(p.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})})})]},s)})):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add opening stock."})})}):(0,g.jsx)(g.Fragment,{children:T&&T.length>0?null===T||void 0===T?void 0:T.map(((e,s)=>{var t,l;return(0,g.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,g.jsx)("th",{scope:"row",children:s+1}),(0,g.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.name)||(0,g.jsx)("span",{className:"text-black",children:"-"})}),(0,g.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.code)||(0,g.jsx)("span",{className:"text-black",children:"-"})}),(0,g.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||(0,g.jsx)("span",{className:"text-black",children:"-"})}),(0,g.jsxs)("div",{className:"icon-container d-flex pb-0",children:[(0,g.jsx)("span",{className:"icon-wrapper",title:"Edit",children:(0,g.jsx)(p.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,g.jsx)("span",{className:"icon-wrapper",title:"Delete",onClick:()=>(e=>{const s=T.filter(((s,t)=>t!==e));V(s)})(s),children:(0,g.jsx)(x.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})]})]},s)})):(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add opening stock."})})})})]})})}),(0,g.jsxs)("div",{className:"text-end",children:[(0,g.jsx)(c.A,{className:"fw-bold cancel-button me-2",children:"Cancel"}),(0,g.jsx)(c.A,{className:"fw-bold custom-button",type:"submit",children:F?"Update":"Submit"})]})]})]}),(0,g.jsx)(h.A,{openingProducts:T,setOpeningProducts:V,showModal:E,handleClose:()=>I(!1)})]})}}}]);
//# sourceMappingURL=72.1b1499f1.chunk.js.map