"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[766],{9766:(e,l,s)=>{s.r(l),s.d(l,{default:()=>f});var d=s(5043),a=s(5009),i=s(6522),t=s(4282),o=s(1072),n=s(8602),c=s(8258),r=s(5449),u=s(423),h=s(3825),v=s(7196),m=s(6414),p=s(4556),x=s(9325),b=s(4858),j=s(5475),N=s(579);const f=()=>{var e,l,s,f,g,A,w,y,D;const[S]=(0,j.ok)(),C=S.get("id"),G=(0,p.wA)(),{handleSubmit:R,register:k,setValue:I}=(0,b.mN)(),[E,L]=(0,d.useState)(!1),_=(0,p.d4)((e=>e)),[q,O]=(0,d.useState)((new Date).toISOString().split("T")[0]),[W,P]=(0,d.useState)([]);console.log(W,"openingProducts");const F=null===_||void 0===_||null===(e=_.getDispatchDataReducer)||void 0===e||null===(l=e.dispatchList)||void 0===l?void 0:l.response;console.log(F,"DispatchData");const U=null===_||void 0===_||null===(s=_.getWarehouseListReducer)||void 0===s||null===(f=s.searchWarehouse)||void 0===f?void 0:f.response,V=null===_||void 0===_||null===(g=_.listingUsersReducer)||void 0===g||null===(A=g.listingUsers)||void 0===A?void 0:A.response,B=null===_||void 0===_||null===(w=_.listingCustomerReducer)||void 0===w||null===(y=w.listingCustomer)||void 0===y?void 0:y.response,Q=null===U||void 0===U?void 0:U.map((e=>({value:e._id,label:e.name}))),H=null===V||void 0===V?void 0:V.map((e=>({value:e._id,label:e.name}))),M=null===B||void 0===B?void 0:B.map((e=>({value:e._id,label:e.name}))),[T,J]=(0,d.useState)(null);console.log(T,"selectedWarehouse");const[K,Y]=(0,d.useState)(null),[z,X]=(0,d.useState)(null),[Z,$]=(0,d.useState)(!1),[ee,le]=(0,d.useState)(null),[se,de]=(0,d.useState)(!1),[ae,ie]=(0,d.useState)(""),te=(0,d.useRef)(null);console.log(ae,"editedQuantity");console.log(ee,"selectedStock34534r");const oe=()=>{de(!1)};(0,d.useEffect)((()=>{const e=e=>{te.current&&!te.current.contains(e.target)&&oe()};if(se)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[se]),(0,d.useEffect)((()=>{if(C&&(null===F||void 0===F?void 0:F.length)>0){const e=null===F||void 0===F?void 0:F.find((e=>e._id===C));le(e)}}),[C,F]),(0,d.useEffect)((()=>{if(C&&ee){var e,l,s,d,a,i;console.log(ee,"2345432"),O(null!==ee&&void 0!==ee&&ee.createdAt?new Date(null===ee||void 0===ee?void 0:ee.createdAt).toISOString().split("T")[0]:"");const t=null!==ee&&void 0!==ee&&ee.warehouseData?{value:ee.warehouseId,label:null===(e=ee.warehouseData)||void 0===e||null===(l=e.find((e=>(null===e||void 0===e?void 0:e._id)===(null===ee||void 0===ee?void 0:ee.warehouseId))))||void 0===l?void 0:l.name}:{};J(t);const o=null!==ee&&void 0!==ee&&ee.customerData?{value:null===ee||void 0===ee?void 0:ee.customerId,label:null===(s=ee.customerData)||void 0===s||null===(d=s.find((e=>(null===e||void 0===e?void 0:e._id)===(null===ee||void 0===ee?void 0:ee.customerId))))||void 0===d?void 0:d.name}:{};X(o);const n=null!==ee&&void 0!==ee&&ee.dispatchId?{value:null===ee||void 0===ee?void 0:ee.dispatchId,label:null===(a=ee.dispatchByData)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.name}:{};Y(n),I("invoiceNumber",(null===ee||void 0===ee?void 0:ee.invoiceNumber)||""),I("description",(null===ee||void 0===ee?void 0:ee.description)||""),I("invoiceValue",(null===ee||void 0===ee?void 0:ee.fright)||""),I("attachmentGRfile",(null===ee||void 0===ee?void 0:ee.attachmentGRfile)||""),I("grNumber",(null===ee||void 0===ee?void 0:ee.grNumber)||"")}}),[C,ee]);(0,d.useEffect)((()=>{G((0,x.lo)())}),[G]),(0,d.useEffect)((()=>{G((0,x.GU)())}),[G]),(0,d.useEffect)((()=>{G((0,x.kW)())}),[G]);return(0,N.jsxs)("div",{children:[(0,N.jsx)(a.A,{breadCrumbItems:[{label:"SHIVAY Dispatch List",path:"/shivay/dispatch"},{label:"Add Dispatch ",path:"/shivay/dispatch",active:!0}],title:"Add Dispatch"}),(0,N.jsxs)(i.A,{onSubmit:R((e=>{var l;const s=W.map((e=>{let{product:l,...s}=e;return s})),d=new FormData;(null===e||void 0===e||null===(l=e.attachmentGRfile)||void 0===l?void 0:l[0])instanceof File&&d.append("attachmentGRfile",e.attachmentGRfile[0]),d.append("warehouseId",null===T||void 0===T?void 0:T.value),d.append("dispatchBy",null===K||void 0===K?void 0:K.value),d.append("customerId",null===z||void 0===z?void 0:z.value),d.append("productDispatchQty",C?10:JSON.stringify(s)),d.append("description",null===e||void 0===e?void 0:e.description),d.append("date",null===e||void 0===e?void 0:e.date),d.append("grNumber",null===e||void 0===e?void 0:e.grNumber),C&&d.append("_id",C),G(C?(0,x.tw)(d):(0,x.KD)(d))})),children:[(0,N.jsx)("div",{className:"accordion mb-3",id:"accordionExample",children:(0,N.jsxs)("div",{className:"accordion-item",style:{border:"2px solid #6655D9"},children:[(0,N.jsx)("h2",{className:"accordion-header mt-0",children:(0,N.jsxs)("button",{className:"accordion-button py-1 d-flex justify-content-between align-items-center w-100",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":Z?"true":"false","aria-controls":"collapseOne",onClick:()=>{$((e=>!e))},children:[(0,N.jsx)("div",{className:"flex-grow-1 text-black fw-bold",children:" Add Dispatch Details"}),(0,N.jsx)("div",{className:"d-flex",children:(0,N.jsxs)(t.A,{className:"fw-bold custom-button me-2",onClick:()=>L(!0),disabled:!Z,children:[(0,N.jsx)(u.Hpy,{className:"fs-3"}),"\xa0Product"]})})]})}),(0,N.jsx)("div",{id:"collapseOne",className:"accordion-collapse collapse "+(Z?"show":""),"data-bs-parent":"#accordionExample",children:(0,N.jsx)("div",{className:"accordion-body py-1",children:(0,N.jsx)(i.A,{children:(0,N.jsxs)(o.A,{children:[(0,N.jsx)(n.A,{sm:3,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"Warehouse"}),(0,N.jsx)(r.Ay,{value:T,onChange:e=>{J(e)},options:Q,placeholder:"Select a warehouse",isClearable:!0,required:!0})]})}),(0,N.jsx)(n.A,{sm:3,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"Customer"}),(0,N.jsx)(r.Ay,{value:z,onChange:e=>{X(e)},options:M,placeholder:"Select a Customer",isClearable:!0,required:!0})]})}),(0,N.jsx)(n.A,{sm:3,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"Dispatch By"}),(0,N.jsx)(r.Ay,{value:K,onChange:e=>{Y(e)},options:H,placeholder:"Select a User",isClearable:!0,required:!0})]})}),(0,N.jsx)(n.A,{sm:3,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"Date Range"}),(0,N.jsx)(i.A.Control,{type:"date",defaultValue:q,...k("date",{required:!0}),required:!0})]})}),(0,N.jsx)(n.A,{sm:3,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"GR Number"}),(0,N.jsx)(i.A.Control,{type:"number",placeholder:"Enter Invoice Number",...k("grNumber",{required:!0})})]})}),(0,N.jsx)(n.A,{sm:3,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"Attach GR File"}),(0,N.jsx)(i.A.Control,{type:"file",placeholder:"Upload file",...k("attachmentGRfile",{required:!(null!==ee&&void 0!==ee&&ee.attachmentGRfile)})}),(null===ee||void 0===ee?void 0:ee.attachmentGRfile)&&(0,N.jsx)("div",{className:"mt-2",children:(0,N.jsx)("a",{href:ee.attachmentGRfile,target:"_blank",rel:"noopener noreferrer",children:"View Existing Invoice"})})]})}),(0,N.jsx)(n.A,{sm:6,children:(0,N.jsxs)(i.A.Group,{className:"mb-1",children:[(0,N.jsx)(i.A.Label,{className:"mb-0",children:"Description"}),(0,N.jsx)(i.A.Control,{as:"textarea",rows:1,placeholder:"Enter Description",...k("description",{required:!0})})]})})]})})})})]})}),(0,N.jsxs)("div",{className:"mt-2",children:[(0,N.jsx)(c.A,{style:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:(0,N.jsx)(c.A.Body,{className:"text-center py-1",children:(0,N.jsxs)("table",{className:"table table-striped bg-white",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{className:"table_header",children:[(0,N.jsx)("th",{scope:"col",children:(0,N.jsx)("i",{className:"mdi mdi-merge"})}),(0,N.jsx)("th",{scope:"col",children:"Product Name"}),(0,N.jsx)("th",{scope:"col",children:"Modal"}),(0,N.jsx)("th",{scope:"col",children:"Code"}),(0,N.jsx)("th",{scope:"col",children:"Quantity"})]})}),!C&&(0,N.jsx)("tbody",{children:W&&W.length>0?W.map(((e,l)=>{var s,d,a,i;return(0,N.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,N.jsx)("th",{scope:"row",children:l+1}),(0,N.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.name)||(0,N.jsx)("span",{className:"text-danger",children:"N/A"})}),(0,N.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(d=e.product)||void 0===d||null===(a=d.modelId)||void 0===a?void 0:a.name)||(0,N.jsx)("span",{className:"text-danger",children:"N/A"})}),(0,N.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.code)||(0,N.jsx)("span",{className:"text-danger",children:"N/A"})}),(0,N.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||(0,N.jsx)("span",{className:"text-danger",children:"N/A"})}),(0,N.jsx)("td",{}),(0,N.jsxs)("div",{className:"icon-container d-flex pb-0",children:[(0,N.jsx)("span",{className:"icon-wrapper",title:"Edit",children:(0,N.jsx)(h.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,N.jsx)("span",{className:"icon-wrapper",title:"Delete",children:(0,N.jsx)(v.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})]})]},l)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add dispatch."})})}),C&&(0,N.jsx)("tbody",{children:null===ee||void 0===ee||null===(D=ee.productData)||void 0===D?void 0:D.map(((e,l)=>{var s,d;return(0,N.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,N.jsx)("td",{children:l+1}),(0,N.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),(0,N.jsx)("td",{children:null===ee||void 0===ee||null===(s=ee.modelData)||void 0===s||null===(d=s.find((l=>(null===l||void 0===l?void 0:l._id)===(null===e||void 0===e?void 0:e.modelId))))||void 0===d?void 0:d.name}),(0,N.jsx)("td",{children:null===e||void 0===e?void 0:e.code}),(0,N.jsx)("td",{children:null===e||void 0===e?void 0:e.stockOutQty})]},l)}))})]})})}),(0,N.jsxs)("div",{className:"text-end",children:[(0,N.jsx)(t.A,{className:"fw-bold cancel-button me-2",children:"Cancel"}),(0,N.jsx)(t.A,{className:"fw-bold custom-button",type:"submit",children:"Submit"})]})]})]}),(0,N.jsx)(m.A,{selectedWarehouse:T,openingProducts:W,setOpeningProducts:P,showModal:E,handleClose:()=>L(!1)})]})}}}]);
//# sourceMappingURL=766.8d2256a9.chunk.js.map