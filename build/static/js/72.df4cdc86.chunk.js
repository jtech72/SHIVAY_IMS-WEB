"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[72],{5691:(e,s,l)=>{l.r(s),l.d(s,{default:()=>f});var t=l(5043),a=l(5009),n=l(6522),d=l(1072),c=l(8602),o=l(4282),i=l(8258),r=l(3817),u=l(423),p=l(3825),x=l(7196),h=l(4438),m=l(4556),v=l(9325),j=l(4858),b=l(5475),N=l(579);const f=()=>{var e,s,l,f,g,k;const w=(0,m.wA)(),{handleSubmit:y,register:A,setValue:S}=(0,j.mN)(),[C,E]=(0,t.useState)(!1),D=(0,m.d4)((e=>e)),L=(new Date).toISOString().split("T")[0],[O]=(0,b.ok)(),P=O.get("Id"),q=Boolean(P),_=null===D||void 0===D||null===(e=D.stockListReducer)||void 0===e||null===(s=e.stockList)||void 0===s?void 0:s.response,F=null===D||void 0===D||null===(l=D.getWarehouseListReducer)||void 0===l||null===(f=l.searchWarehouse)||void 0===f?void 0:f.response,I=null===F||void 0===F?void 0:F.map((e=>({value:e._id,label:e.name}))),[R,W]=(0,t.useState)([]),[G,B]=(0,t.useState)(null);console.log(R,"openingProducts");const[H,T]=(0,t.useState)(null),[V,K]=(0,t.useState)(!1),[M,Q]=(0,t.useState)((null===G||void 0===G?void 0:G.quantity)||""),U=(0,t.useRef)(null);(0,t.useEffect)((()=>{w((0,v.lo)())}),[w]),(0,t.useEffect)((()=>{w((0,v.y$)({limit:"",page:"",search:""}))}),[w]),(0,t.useEffect)((()=>{if(P&&(null===_||void 0===_?void 0:_.length)>0){const e=null===_||void 0===_?void 0:_.find((e=>e._id===P));B(e),console.log(e,"foundStock")}}),[P,_]);(0,t.useEffect)((()=>{if(G){const e=null!==G&&void 0!==G&&G.warehouseData?[{value:G.warehouseData._id,label:G.warehouseData.name}]:[];T(e),S("date",null===G||void 0===G?void 0:G.date),S("description",null===G||void 0===G?void 0:G.description)}}),[G]),console.log(G,"selectedStock");const Y=()=>{K(!0)},$=e=>{Q(e.target.value)},z=()=>{K(!1)},J=e=>{"Enter"===e.key&&z()};return(0,t.useEffect)((()=>{const e=e=>{U.current&&!U.current.contains(e.target)&&z()};if(V)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[V]),(0,N.jsxs)("div",{children:[(0,N.jsx)(a.A,{breadCrumbItems:[{label:"SHIVAY Opening Stock List",path:"/shivay/openingStock"},{label:q?"Edit Opening Stock":"Add Opening Stock",path:"/shivay/openingStock",active:!0}],title:q?"Edit Opening Stock":"Add Opening Stock"}),(0,N.jsxs)(n.A,{onSubmit:y((e=>{const s=R.map((e=>{let{product:s,...l}=e;return l})),l={warehouseId:null===H||void 0===H?void 0:H.value,productStock:s,description:null===e||void 0===e?void 0:e.description,date:null===e||void 0===e?void 0:e.date};w((0,v.Ok)(l))})),children:[(0,N.jsxs)(d.A,{children:[(0,N.jsx)(c.A,{sm:3,children:(0,N.jsxs)(n.A.Group,{className:"mb-1",children:[(0,N.jsx)(n.A.Label,{className:"mb-0",children:"Warehouse"}),(0,N.jsx)(r.Ay,{value:H,onChange:e=>{T(e)},options:I,placeholder:"Select a warehouse",isClearable:!0,required:!0})]})}),(0,N.jsx)(c.A,{sm:3,children:(0,N.jsxs)(n.A.Group,{className:"mb-1",children:[(0,N.jsx)(n.A.Label,{className:"mb-0",children:"Date Range"}),(0,N.jsx)(n.A.Control,{type:"date",value:P?"":L,...A("date",{required:!0}),required:!0})]})}),(0,N.jsx)(c.A,{sm:3,children:(0,N.jsxs)(n.A.Group,{className:"mb-1",children:[(0,N.jsx)(n.A.Label,{className:"mb-0",children:"Description"}),(0,N.jsx)(n.A.Control,{as:"textarea",rows:1,...A("description",{required:!0}),placeholder:"Enter Description"})]})}),(0,N.jsx)(c.A,{sm:3,className:"text-end mt-1",children:!q&&(0,N.jsxs)(o.A,{className:"mt-2 fw-bold custom-button",onClick:()=>E(!0),children:[(0,N.jsx)(u.Hpy,{className:"fs-3"}),"\xa0Product"]})})]}),(0,N.jsxs)("div",{className:"mt-2",children:[(0,N.jsx)(i.A,{style:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:(0,N.jsx)(i.A.Body,{className:"text-center py-1",children:(0,N.jsxs)("table",{className:"table table-striped bg-white",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{className:"table_header",children:[(0,N.jsx)("th",{scope:"col",children:(0,N.jsx)("i",{className:"mdi mdi-merge"})}),(0,N.jsx)("th",{scope:"col",children:"Product Name"}),(0,N.jsx)("th",{scope:"col",children:"Code"}),(0,N.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,N.jsx)("tbody",{children:P?(0,N.jsx)(N.Fragment,{children:(null===(g=[G])||void 0===g?void 0:g.length)>0?null===(k=[G])||void 0===k?void 0:k.map(((e,s)=>{var l,t;return(0,N.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,N.jsx)("th",{scope:"row",children:s+1}),(0,N.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(l=e.productData)||void 0===l?void 0:l.name)||(0,N.jsx)("span",{className:"text-black",children:"-"})}),(0,N.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(t=e.productData)||void 0===t?void 0:t.code)||(0,N.jsx)("span",{className:"text-black",children:"-"})}),(0,N.jsx)("td",{className:"fw-bold px-0 pb-0",children:V?(0,N.jsx)("input",{ref:U,type:"number",value:M,onChange:$,onKeyPress:J,className:"form-control form-control-md",style:{width:"5vw",display:"inline-block",marginTop:"-10px"}}):(0,N.jsx)("span",{onClick:Y,children:M})||(0,N.jsx)("span",{className:"text-black",children:"-"})}),(0,N.jsx)("div",{className:"icon-container d-flex pb-0",children:(0,N.jsx)("span",{className:"icon-wrapper me-4",title:"Edit",onClick:Y,children:(0,N.jsx)(p.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})})})]},s)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add opening stock."})})}):(0,N.jsx)(N.Fragment,{children:R&&R.length>0?null===R||void 0===R?void 0:R.map(((e,s)=>{var l,t;return(0,N.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,N.jsx)("th",{scope:"row",children:s+1}),(0,N.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.name)||(0,N.jsx)("span",{className:"text-black",children:"-"})}),(0,N.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.code)||(0,N.jsx)("span",{className:"text-black",children:"-"})}),(0,N.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||(0,N.jsx)("span",{className:"text-black",children:"-"})}),(0,N.jsxs)("div",{className:"icon-container d-flex pb-0",children:[(0,N.jsx)("span",{className:"icon-wrapper",title:"Edit",children:(0,N.jsx)(p.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,N.jsx)("span",{className:"icon-wrapper",title:"Delete",onClick:()=>(e=>{const s=R.filter(((s,l)=>l!==e));W(s)})(s),children:(0,N.jsx)(x.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})]})]},s)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add opening stock."})})})})]})})}),(0,N.jsxs)("div",{className:"text-end",children:[(0,N.jsx)(o.A,{className:"fw-bold cancel-button me-2",children:"Cancel"}),(0,N.jsx)(o.A,{className:"fw-bold custom-button",type:"submit",children:q?"Update":"Submit"})]})]})]}),(0,N.jsx)(h.A,{openingProducts:R,setOpeningProducts:W,showModal:C,handleClose:()=>E(!1)})]})}}}]);
//# sourceMappingURL=72.df4cdc86.chunk.js.map