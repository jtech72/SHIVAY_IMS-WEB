"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[65],{5065:(e,l,s)=>{s.r(l),s.d(l,{default:()=>A});var i=s(5043),a=s(5009),n=s(6522),d=s(4282),t=s(1072),o=s(8602),c=s(8258),r=s(5449),u=s(423),p=s(3002),v=s(3825),m=s(7196),x=s(6414),h=s(4556),j=s(9325),b=s(4858),N=s(5475),f=s(579);const A=()=>{var e,l,s,A,w,y,g,k,S,I;const[C]=(0,N.ok)(),D=C.get("id"),E=(0,h.wA)(),{handleSubmit:L,register:_,setValue:q}=(0,b.mN)(),[V,G]=(0,i.useState)(!1),B=(0,h.d4)((e=>e)),[F,O]=(0,i.useState)((new Date).toISOString().split("T")[0]),[R,W]=(0,i.useState)([]),P=null===B||void 0===B||null===(e=B.stockInListReducer)||void 0===e||null===(l=e.stockInList)||void 0===l?void 0:l.response,[U,H]=(0,i.useState)(null),Q=null===B||void 0===B||null===(s=B.getWarehouseListReducer)||void 0===s||null===(A=s.searchWarehouse)||void 0===A?void 0:A.response,T=null===B||void 0===B||null===(w=B.listingUsersReducer)||void 0===w||null===(y=w.listingUsers)||void 0===y?void 0:y.response,Y=null===B||void 0===B||null===(g=B.listingSupplierReducer)||void 0===g||null===(k=g.listingSupplier)||void 0===k?void 0:k.response,[$,J]=(0,i.useState)(!1),[K,M]=(0,i.useState)(""),z=(0,i.useRef)(null);console.log(K,"editedQuantity");const X=()=>{J(!1)},Z=()=>{J(!0)};(0,i.useEffect)((()=>{const e=e=>{z.current&&!z.current.contains(e.target)&&X()};if($)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[$]),(0,i.useEffect)((()=>{if(D&&(null===P||void 0===P?void 0:P.length)>0){const e=null===P||void 0===P?void 0:P.find((e=>e._id===D));H(e)}}),[D,P]);const ee=null===Q||void 0===Q?void 0:Q.map((e=>({value:e._id,label:e.name}))),le=null===T||void 0===T?void 0:T.map((e=>({value:e._id,label:e.name}))),se=null===Y||void 0===Y?void 0:Y.map((e=>({value:e._id,label:e.name}))),[ie,ae]=(0,i.useState)(null),[ne,de]=(0,i.useState)(null),[te,oe]=(0,i.useState)(null),[ce,re]=(0,i.useState)(!1);console.log(ie,"selectedWarehouse"),(0,i.useEffect)((()=>{if(D&&U){var e,l,s,i,a,n,d;console.log(U,"2345432"),O(null!==U&&void 0!==U&&U.createdAt?new Date(null===U||void 0===U?void 0:U.createdAt).toISOString().split("T")[0]:"");const t=null!==U&&void 0!==U&&U.warehouseData?{value:U.warehouseId,label:null===(e=U.warehouseData)||void 0===e||null===(l=e.find((e=>(null===e||void 0===e?void 0:e._id)===(null===U||void 0===U?void 0:U.warehouseId))))||void 0===l?void 0:l.name}:{};ae(t);const o=null!==U&&void 0!==U&&U.receivedByData?{value:null===U||void 0===U?void 0:U.receivedBy,label:null===(s=U.receivedByData)||void 0===s||null===(i=s.find((e=>(null===e||void 0===e?void 0:e._id)===(null===U||void 0===U?void 0:U.receivedBy))))||void 0===i?void 0:i.name}:{};de(o);const c=null!==U&&void 0!==U&&U.supplierId?{value:null===U||void 0===U?void 0:U.supplierId,label:null===(a=U.supplierData)||void 0===a||null===(n=a.find((e=>(null===e||void 0===e?void 0:e._id)===(null===U||void 0===U?void 0:U.supplierId))))||void 0===n?void 0:n.name}:{};oe(c),q("invoiceNumber",(null===U||void 0===U?void 0:U.invoiceNumber)||""),q("description",(null===U||void 0===U?void 0:U.description)||""),q("invoiceValue",(null===U||void 0===U?void 0:U.fright)||""),q("invoiceAttachment",(null===U||void 0===U?void 0:U.invoiceAttachment)||""),M((null===U||void 0===U||null===(d=U.productData)||void 0===d?void 0:d.stockInQty)||"")}}),[D,U]),console.log(ie,"selectedWarehouse");(0,i.useEffect)((()=>{E((0,j.lo)())}),[E]),(0,i.useEffect)((()=>{E((0,j.GU)())}),[E]),(0,i.useEffect)((()=>{E((0,j.Y4)())}),[E]);return(0,f.jsxs)("div",{children:[(0,f.jsx)(a.A,{breadCrumbItems:[{label:"SHIVAY Stock In List",path:"/shivay/stockIn"},{label:"Add Stock In ",path:"/shivay/stockIn",active:!0}],title:"Add Stock In"}),(0,f.jsxs)(n.A,{onSubmit:L((e=>{var l;const s=R.map((e=>{let{product:l,...s}=e;return s})),i=new FormData;(null===e||void 0===e||null===(l=e.invoiceAttachment)||void 0===l?void 0:l[0])instanceof File&&i.append("invoiceAttachment",e.invoiceAttachment[0]),i.append("warehouseId",null===ie||void 0===ie?void 0:ie.value),i.append("receivedBy",null===ne||void 0===ne?void 0:ne.value),i.append("supplierId",null===te||void 0===te?void 0:te.value),i.append("stockInQty",D?parseInt(K):JSON.stringify(s)),i.append("description",null===e||void 0===e?void 0:e.description),i.append("date",null===e||void 0===e?void 0:e.date),i.append("invoiceNumber",null===e||void 0===e?void 0:e.invoiceNumber),i.append("fright",null===e||void 0===e?void 0:e.invoiceValue),D&&i.append("_id",D),D?(alert("update"),E((0,j.I$)(i))):E((0,j.T$)(i))})),children:[(0,f.jsx)("div",{className:"accordion mb-3",id:"accordionExample",children:(0,f.jsxs)("div",{className:"accordion-item",style:{border:"2px solid #6655D9"},children:[(0,f.jsx)("h2",{className:"accordion-header mt-0",children:(0,f.jsxs)("button",{className:"accordion-button py-1 d-flex justify-content-between align-items-center w-100",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":ce?"true":"false","aria-controls":"collapseOne",onClick:()=>{re((e=>!e))},children:[(0,f.jsx)("div",{className:"flex-grow-1 text-black fw-bold",children:" Add Stock In Details"}),(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsxs)(d.A,{className:"fw-bold custom-button me-2",onClick:()=>G(!0),disabled:!ce,children:[(0,f.jsx)(u.Hpy,{className:"fs-3"}),"\xa0Product"]})})]})}),(0,f.jsx)("div",{id:"collapseOne",className:"accordion-collapse collapse "+(ce?"show":""),"data-bs-parent":"#accordionExample",children:(0,f.jsx)("div",{className:"accordion-body py-1",children:(0,f.jsxs)(t.A,{children:[(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Warehouse"}),(0,f.jsx)(r.Ay,{value:ie,onChange:e=>{ae(e)},options:ee,placeholder:"Select a warehouse",isClearable:!0,required:!0})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Received By"}),(0,f.jsx)(r.Ay,{value:ne,onChange:e=>{de(e)},options:le,placeholder:"Select a User",isClearable:!0,required:!0})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Supplier"}),(0,f.jsx)(r.Ay,{value:te,onChange:e=>{oe(e)},options:se,placeholder:"Select a Supplier",isClearable:!0,required:!0})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Date Range"}),(0,f.jsx)(n.A.Control,{type:"date",value:F,..._("date",{required:!0}),required:!0})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Invoice Number"}),(0,f.jsx)(n.A.Control,{type:"number",placeholder:"Enter Invoice Number",..._("invoiceNumber",{required:!0})})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Attach Invoice"}),(0,f.jsx)(n.A.Control,{type:"file",placeholder:"Upload file",..._("invoiceAttachment",{required:!(null!==U&&void 0!==U&&U.invoiceAttachment)})}),(null===U||void 0===U?void 0:U.invoiceAttachment)&&(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsx)("a",{href:U.invoiceAttachment,target:"_blank",rel:"noopener noreferrer",children:"View Existing Invoice"})})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Invoice Value"}),(0,f.jsx)(n.A.Control,{type:"text",..._("invoiceValue",{required:!0}),placeholder:"Enter Invoice Value"})]})}),(0,f.jsx)(o.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Description"}),(0,f.jsx)(n.A.Control,{as:"textarea",rows:1,..._("description",{required:!0}),placeholder:"Enter Description"})]})})]})})})]})}),(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsx)(c.A,{style:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:(0,f.jsx)(c.A.Body,{className:"text-center py-1",children:(0,f.jsxs)("table",{className:"table table-striped bg-white",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"table_header",children:[(0,f.jsx)("th",{scope:"col",children:(0,f.jsx)("i",{className:"mdi mdi-merge"})}),(0,f.jsx)("th",{scope:"col",children:"Product Name"}),(0,f.jsx)("th",{scope:"col",children:"Code"}),(0,f.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,f.jsx)("tbody",{children:D?(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"row",children:"1"}),(0,f.jsx)("td",{className:"text-uppercase fw-bold",children:(null===U||void 0===U||null===(S=U.productData)||void 0===S?void 0:S.name)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:(null===U||void 0===U||null===(I=U.productData)||void 0===I?void 0:I.code)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:$?(0,f.jsx)("input",{ref:z,type:"number",value:K,onChange:e=>{M(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&X()},className:"form-control form-control-md",style:{width:"5vw",display:"inline-block",marginTop:"-10px"}}):(0,f.jsxs)("span",{onClick:Z,children:[" ",K]})}),(0,f.jsx)("div",{className:"icon-container d-flex pb-0",children:(0,f.jsx)("span",{className:"icon-wrapper me-4",title:"Edit",onClick:Z,children:(0,f.jsx)(v.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})})}),(0,f.jsx)("td",{children:(0,f.jsxs)("div",{className:"icon-container d-flex pb-0",children:[(0,f.jsx)("span",{className:"icon-wrapper",title:"View",children:(0,f.jsx)(p.H0j,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,f.jsx)("span",{className:"icon-wrapper",title:"Edit",children:(0,f.jsx)(v.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,f.jsx)("span",{className:"icon-wrapper",title:"Delete",children:(0,f.jsx)(m.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})]})})]}):R&&R.length>0?R.map(((e,l)=>{var s,i;return(0,f.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,f.jsx)("th",{scope:"row",children:l+1}),(0,f.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.name)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.code)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{}),(0,f.jsx)("td",{children:(0,f.jsxs)("div",{className:"icon-container d-flex pb-0",children:[(0,f.jsx)("span",{className:"icon-wrapper",title:"View",children:(0,f.jsx)(p.H0j,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,f.jsx)("span",{className:"icon-wrapper",title:"Edit",children:(0,f.jsx)(v.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,f.jsx)("span",{className:"icon-wrapper",title:"Delete",children:(0,f.jsx)(m.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})]})})]},l)})):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:"6",className:"text-center text-muted py-3",children:"No products added yet. Please add products to add stockIn."})})})]})})}),(0,f.jsxs)("div",{className:"text-end",children:[(0,f.jsx)(d.A,{className:"fw-bold cancel-button me-2",children:"Cancel"}),(0,f.jsx)(d.A,{className:"fw-bold custom-button",type:"submit",children:D?"Update":"Submit"})]})]})]}),(0,f.jsx)(x.A,{openingProducts:R,setOpeningProducts:W,showModal:V,handleClose:()=>G(!1)})]})}}}]);
//# sourceMappingURL=65.d12e7cdd.chunk.js.map