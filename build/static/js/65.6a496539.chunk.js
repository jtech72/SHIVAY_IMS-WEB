"use strict";(self.webpackChunkhyper_react=self.webpackChunkhyper_react||[]).push([[65],{5065:(e,l,s)=>{s.r(l),s.d(l,{default:()=>A});var i=s(5043),a=s(5009),n=s(6522),d=s(4282),o=s(1072),t=s(8602),c=s(8258),r=s(5449),u=s(423),p=s(3002),v=s(3825),m=s(7196),h=s(6414),x=s(4556),b=s(9325),j=s(4858),N=s(5475),f=s(579);const A=()=>{var e,l,s,A,y,w,g,k,S,I;const[C]=(0,N.ok)(),D=C.get("id"),E=(0,x.wA)(),{handleSubmit:L,register:_,setValue:q}=(0,j.mN)(),[G,V]=(0,i.useState)(!1),B=(0,x.d4)((e=>e)),[O,R]=(0,i.useState)((new Date).toISOString().split("T")[0]),[P,U]=(0,i.useState)([]),W=null===B||void 0===B||null===(e=B.stockInListReducer)||void 0===e||null===(l=e.stockInList)||void 0===l?void 0:l.response,[F,Q]=(0,i.useState)(null),T=null===B||void 0===B||null===(s=B.getWarehouseListReducer)||void 0===s||null===(A=s.searchWarehouse)||void 0===A?void 0:A.response,H=null===B||void 0===B||null===(y=B.listingUsersReducer)||void 0===y||null===(w=y.listingUsers)||void 0===w?void 0:w.response,Y=null===B||void 0===B||null===(g=B.listingSupplierReducer)||void 0===g||null===(k=g.listingSupplier)||void 0===k?void 0:k.response,[$,J]=(0,i.useState)(!1),[K,M]=(0,i.useState)(""),z=(0,i.useRef)(null);console.log(K,"editedQuantity");const X=()=>{J(!1)},Z=()=>{J(!0)};(0,i.useEffect)((()=>{const e=e=>{z.current&&!z.current.contains(e.target)&&X()};if($)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[$]),(0,i.useEffect)((()=>{if(D&&(null===W||void 0===W?void 0:W.length)>0){const e=null===W||void 0===W?void 0:W.find((e=>e._id===D));Q(e)}}),[D,W]);const ee=null===T||void 0===T?void 0:T.map((e=>({value:e._id,label:e.name}))),le=null===H||void 0===H?void 0:H.map((e=>({value:e._id,label:e.name}))),se=null===Y||void 0===Y?void 0:Y.map((e=>({value:e._id,label:e.name}))),[ie,ae]=(0,i.useState)(null),[ne,de]=(0,i.useState)(null),[oe,te]=(0,i.useState)(null),[ce,re]=(0,i.useState)(!1);console.log(ie,"selectedWarehouse"),(0,i.useEffect)((()=>{if(D&&F){var e,l,s,i,a,n,d;console.log(F,"2345432"),R(null!==F&&void 0!==F&&F.createdAt?new Date(null===F||void 0===F?void 0:F.createdAt).toISOString().split("T")[0]:"");const o=null!==F&&void 0!==F&&F.warehouseData?{value:F.warehouseId,label:null===(e=F.warehouseData)||void 0===e||null===(l=e.find((e=>(null===e||void 0===e?void 0:e._id)===(null===F||void 0===F?void 0:F.warehouseId))))||void 0===l?void 0:l.name}:{};ae(o);const t=null!==F&&void 0!==F&&F.receivedByData?{value:null===F||void 0===F?void 0:F.receivedBy,label:null===(s=F.receivedByData)||void 0===s||null===(i=s.find((e=>(null===e||void 0===e?void 0:e._id)===(null===F||void 0===F?void 0:F.receivedBy))))||void 0===i?void 0:i.name}:{};de(t);const c=null!==F&&void 0!==F&&F.supplierId?{value:null===F||void 0===F?void 0:F.supplierId,label:null===(a=F.supplierData)||void 0===a||null===(n=a.find((e=>(null===e||void 0===e?void 0:e._id)===(null===F||void 0===F?void 0:F.supplierId))))||void 0===n?void 0:n.name}:{};te(c),q("invoiceNumber",(null===F||void 0===F?void 0:F.invoiceNumber)||""),q("description",(null===F||void 0===F?void 0:F.description)||""),q("invoiceValue",(null===F||void 0===F?void 0:F.fright)||""),q("invoiceAttachment",(null===F||void 0===F?void 0:F.invoiceAttachment)||""),M((null===F||void 0===F||null===(d=F.productData)||void 0===d?void 0:d.stockInQty)||"")}}),[D,F]),console.log(ie,"selectedWarehouse");(0,i.useEffect)((()=>{E((0,b.lo)())}),[E]),(0,i.useEffect)((()=>{E((0,b.GU)())}),[E]),(0,i.useEffect)((()=>{E((0,b.Y4)())}),[E]);return(0,f.jsxs)("div",{children:[(0,f.jsx)(a.A,{breadCrumbItems:[{label:"SHIVAY Stock In List",path:"/shivay/stockIn"},{label:"Add Stock In ",path:"/shivay/stockIn",active:!0}],title:"Add Stock In"}),(0,f.jsxs)(n.A,{onSubmit:L((e=>{var l;const s=P.map((e=>{let{product:l,...s}=e;return s})),i=new FormData;(null===e||void 0===e||null===(l=e.invoiceAttachment)||void 0===l?void 0:l[0])instanceof File&&i.append("invoiceAttachment",e.invoiceAttachment[0]),i.append("warehouseId",null===ie||void 0===ie?void 0:ie.value),i.append("receivedBy",null===ne||void 0===ne?void 0:ne.value),i.append("supplierId",null===oe||void 0===oe?void 0:oe.value),i.append("stockInQty",D?parseInt(K):JSON.stringify(s)),i.append("description",null===e||void 0===e?void 0:e.description),i.append("date",null===e||void 0===e?void 0:e.date),i.append("invoiceNumber",null===e||void 0===e?void 0:e.invoiceNumber),i.append("fright",null===e||void 0===e?void 0:e.invoiceValue),D&&i.append("_id",D),D?(alert("update"),E((0,b.I$)(i))):E((0,b.T$)(i))})),children:[(0,f.jsx)("div",{className:"accordion mb-3",id:"accordionExample",children:(0,f.jsxs)("div",{className:"accordion-item",style:{border:"2px solid #6655D9"},children:[(0,f.jsx)("h2",{className:"accordion-header mt-0",children:(0,f.jsxs)("button",{className:"accordion-button py-1 d-flex justify-content-between align-items-center w-100",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":ce?"true":"false","aria-controls":"collapseOne",onClick:()=>{re((e=>!e))},children:[(0,f.jsx)("div",{className:"flex-grow-1 text-black fw-bold",children:" Add Stock In Details"}),(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsxs)(d.A,{className:"fw-bold custom-button me-2",onClick:()=>V(!0),disabled:!ce,children:[(0,f.jsx)(u.Hpy,{className:"fs-3"}),"\xa0Product"]})})]})}),(0,f.jsx)("div",{id:"collapseOne",className:"accordion-collapse collapse "+(ce?"show":""),"data-bs-parent":"#accordionExample",children:(0,f.jsx)("div",{className:"accordion-body py-1",children:(0,f.jsxs)(o.A,{children:[(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Warehouse"}),(0,f.jsx)(r.Ay,{value:ie,onChange:e=>{ae(e)},options:ee,placeholder:"Select a warehouse",isClearable:!0,required:!0})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Received By"}),(0,f.jsx)(r.Ay,{value:ne,onChange:e=>{de(e)},options:le,placeholder:"Select a User",isClearable:!0,required:!0})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Supplier"}),(0,f.jsx)(r.Ay,{value:oe,onChange:e=>{te(e)},options:se,placeholder:"Select a Supplier",isClearable:!0,required:!0})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Date Range"}),(0,f.jsx)(n.A.Control,{type:"date",value:O,..._("date",{required:!0}),required:!0})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Invoice Number"}),(0,f.jsx)(n.A.Control,{type:"number",placeholder:"Enter Invoice Number",..._("invoiceNumber",{required:!0})})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Attach Invoice"}),(0,f.jsx)(n.A.Control,{type:"file",placeholder:"Upload file",..._("invoiceAttachment",{required:!(null!==F&&void 0!==F&&F.invoiceAttachment)})}),(null===F||void 0===F?void 0:F.invoiceAttachment)&&(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsx)("a",{href:F.invoiceAttachment,target:"_blank",rel:"noopener noreferrer",children:"View Existing Invoice"})})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Invoice Value"}),(0,f.jsx)(n.A.Control,{type:"text",..._("invoiceValue",{required:!0}),placeholder:"Enter Invoice Value"})]})}),(0,f.jsx)(t.A,{sm:3,children:(0,f.jsxs)(n.A.Group,{className:"mb-1",children:[(0,f.jsx)(n.A.Label,{className:"mb-0",children:"Description"}),(0,f.jsx)(n.A.Control,{as:"textarea",rows:1,..._("description",{required:!0}),placeholder:"Enter Description"})]})})]})})})]})}),(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsx)(c.A,{style:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset"},children:(0,f.jsx)(c.A.Body,{className:"text-center py-1",children:(0,f.jsxs)("table",{className:"table table-striped bg-white",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"table_header",children:[(0,f.jsx)("th",{scope:"col",children:(0,f.jsx)("i",{className:"mdi mdi-merge"})}),(0,f.jsx)("th",{scope:"col",children:"Product Name"}),(0,f.jsx)("th",{scope:"col",children:"Code"}),(0,f.jsx)("th",{scope:"col",children:"Quantity"})]})}),(0,f.jsx)("tbody",{children:D?(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{scope:"row",children:"1"}),(0,f.jsx)("td",{className:"text-uppercase fw-bold",children:(null===F||void 0===F||null===(S=F.productData)||void 0===S?void 0:S.name)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:(null===F||void 0===F||null===(I=F.productData)||void 0===I?void 0:I.code)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:$?(0,f.jsx)("input",{ref:z,type:"number",value:K,onChange:e=>{M(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&X()},className:"form-control form-control-md",style:{width:"5vw",display:"inline-block",marginTop:"-10px"}}):(0,f.jsxs)("span",{onClick:Z,children:[" ",K]})}),(0,f.jsx)("td",{}),(0,f.jsx)("div",{className:"icon-container d-flex pb-0",children:(0,f.jsx)("span",{className:"icon-wrapper me-4",title:"Edit",onClick:Z,children:(0,f.jsx)(v.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})})})]}):P&&P.length>0?P.map(((e,l)=>{var s,i;return(0,f.jsxs)("tr",{className:"text-dark fw-bold text-nowrap highlight-row",children:[(0,f.jsx)("th",{scope:"row",children:l+1}),(0,f.jsx)("td",{className:"text-uppercase fw-bold",children:(null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.name)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.code)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{className:"fw-bold",children:(null===e||void 0===e?void 0:e.quantity)||(0,f.jsx)("span",{className:"text-black",children:"-"})}),(0,f.jsx)("td",{}),(0,f.jsx)("td",{children:(0,f.jsxs)("div",{className:"icon-container d-flex pb-0",children:[(0,f.jsx)("span",{className:"icon-wrapper",title:"View",children:(0,f.jsx)(p.H0j,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,f.jsx)("span",{className:"icon-wrapper",title:"Edit",children:(0,f.jsx)(v.dtF,{className:"fs-4 text-black",style:{cursor:"pointer"}})}),(0,f.jsx)("span",{className:"icon-wrapper",title:"Delete",children:(0,f.jsx)(m.WFf,{className:"fs-4 text-black",style:{cursor:"pointer"}})})]})})]},l)})):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:"6",className:"text-center text-danger py-3",children:"Note :  No products added yet. Please add products to add stockIn."})})})]})})}),(0,f.jsxs)("div",{className:"text-end",children:[(0,f.jsx)(d.A,{className:"fw-bold cancel-button me-2",children:"Cancel"}),(0,f.jsx)(d.A,{className:"fw-bold custom-button",type:"submit",children:D?"Update":"Submit"})]})]})]}),(0,f.jsx)(h.A,{openingProducts:P,setOpeningProducts:U,showModal:G,handleClose:()=>V(!1)})]})}}}]);
//# sourceMappingURL=65.6a496539.chunk.js.map